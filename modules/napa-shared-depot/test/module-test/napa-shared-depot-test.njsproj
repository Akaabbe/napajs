<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(EnvironmentConfig)" />

  <PropertyGroup>
    <AssemblyName>napa-shared-depot-test</AssemblyName>
  </PropertyGroup>

  <!-- Test files -->
  <!-- It's using the default tsconfig.json@Napa.DevTools -->
  <ItemGroup>
    <TypeScriptCompile Include="test.ts" />
  </ItemGroup>

  <Import Project="$(PkgNapa_DevTools)\Napa.TestAdapter.targets" />

  <ItemGroup>
    <Robocopy Include="..\..\script\$(IntermediateOutputPath)\dist">
      <DestinationFolder>$(QTestDirToDeploy)\app\node_modules\napa-shared-depot</DestinationFolder>
    </Robocopy>
  </ItemGroup>

  <Target Name="CopyTestModule" AfterTargets="AfterBuild">
    <Message Text="Copy Test module." />
    <Copy SourceFiles="..\dummy-module\node\$(O)\dummy.node" DestinationFolder="$(QTestDirToDeploy)\app" ContinueOnError="false" SkipUnchangedFiles="true" />
    <Copy SourceFiles="..\dummy-module\napa\$(O)\dummy.napa" DestinationFolder="$(QTestDirToDeploy)\app" ContinueOnError="false" SkipUnchangedFiles="true" />
  </Target>

</Project>
