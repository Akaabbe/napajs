<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <V8BinPath>$(PACKAGESROOT)\V8.Library\$(COMPILER_VERSION)\bin\$(BuildType)\$(BuildArchitecture)</V8BinPath>
    <V8MiscPath>$(PACKAGESROOT)\V8.Library\misc\$(BuildType)\$(BuildArchitecture)</V8MiscPath>
  </PropertyGroup>

  <ItemDefinitionGroup>
    <ClCompile>
      <DisableSpecificWarnings>4100</DisableSpecificWarnings>
      <AdditionalIncludeDirectories>$(NapaVanillaRoot)\inc;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
      <AdditionalIncludeDirectories>$(NapaVanillaRoot)\src;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
      <AdditionalIncludeDirectories>$(NapaVanillaRoot)\test\component;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
      <AdditionalIncludeDirectories>$(NapaVanillaRoot)\third-party;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
      <AdditionalIncludeDirectories>$(NapaVanillaRoot)\third-party\catch;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
    </ClCompile>
    <Link>
      <AdditionalDependencies>Winmm.lib;%(AdditionalDependencies)</AdditionalDependencies>
    </Link>
  </ItemDefinitionGroup>

  <!-- Product code that is tested and needs to compile -->
  <ItemGroup>
    <ClCompile Include="$(NapaVanillaRoot)\src\scheduler\core.cpp" />
    <ClCompile Include="$(NapaVanillaRoot)\src\v8\v8-common.cpp" />
  </ItemGroup>

  <!-- Test code -->
  <ItemGroup>
    <ClCompile Include="$(MSBuildThisFileDirectory)\core\core-tests.cpp" />
    <ClCompile Include="$(MSBuildThisFileDirectory)\object-transport-v8-helpers\object-transport-v8-helpers-tests.cpp" />
  </ItemGroup>

  <!-- Test artifacts binplace -->
  <ItemGroup>
    <Robocopy Include="$(V8BinPath)\icui18n.dll">
      <DestinationFolder>$(IntermediateOutputPath)</DestinationFolder>
    </Robocopy>
    <Robocopy Include="$(V8BinPath)\icuuc.dll">
      <DestinationFolder>$(IntermediateOutputPath)</DestinationFolder>
    </Robocopy>
    <Robocopy Include="$(V8BinPath)\v8.dll">
      <DestinationFolder>$(IntermediateOutputPath)</DestinationFolder>
    </Robocopy>
    <Robocopy Include="$(V8MiscPath)\natives_blob.bin">
      <DestinationFolder>$(IntermediateOutputPath)</DestinationFolder>
    </Robocopy>
    <Robocopy Include="$(V8MiscPath)\snapshot_blob.bin">
      <DestinationFolder>$(IntermediateOutputPath)</DestinationFolder>
    </Robocopy>
  </ItemGroup>  
  
  <!-- Package dependencies -->
  <Import Project="$(PACKAGESROOT)\V8.Library\exports.props" />
  <Import Project="$(Pkgboost)\build\native\boost.targets" />
  <Import Project="$(Pkgboost_filesystem_vc140)\build\native\boost_filesystem-vc140.targets" />
  <Import Project="$(Pkgboost_system_vc140)\build\native\boost_system-vc140.targets" />
</Project>
